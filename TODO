$Id$
$Name$

Flexbackup to-do list
Some of these might not happen

Cleanup/fix:
 - Revisit -cnewer problem.  Make sure it works with touch -t/-d of
     timestamp refs (ctime isn't set backward by touch like the mtime)

     ctime can't be set anyway. with touch or utime() or whatever.
     http://mail.gnu.org/archive/html/bug-fileutils/2001-01/msg00032.html
     
 - Clean up more $main:: vars, split into types or refactor code
 - bash PIPESTATUS trick fails if remote filesystem and shell there!=bash
     and shell local==bash. bah.
 - Check buffer avail mem thing from John
 - Try to use dump combined flags (for older dumps that want abc not -a -b -c)
 - When level > 9 and using files, -toc sorts it wrong (cosmetic nit)
 - When level > 9 and rm old logs/stamps, order is printed wrong (cosmetic nit)
 - Not all finds have the -fstype flag (from $traverse_fs)
 - Check for existence of remote executables (John had something)
 - Use system with args list so it uses execve not shell.  or open |- & exec.
     will get one layer of shell expansion outta the way
 - Split main program; use separate libs for archiver types that are stored
   in different files?  install then requires more than just program + conf file.

Misc:
 - Make a manual page (AND other enchanced documentation, more than a README)
   someone made a good start or two:
     http://myezserver.com/downloads/mitel/howto/flexbackup-howto.html
      
     http://www.cyber-euskadi.com/howtos/contrib/flexbackup-restore-from-disk-howto.html
     how about french?  http://sgmf.free.fr/flexbackup_doc.html
 - Someone needs to put a bunch of stuff in a faq
     Started... not much at this point
 - Try bfr or dbuffer? (buffer seems unmaintained; no O_LARGEFILE)
     Maybe document how to recompile buffer
 - Try against torture-test list:
     http://ftp.berlios.de/pub/star/testscripts/zwicky/testdump.doc.html


Features to add:
 - A "no blocking at all" option

- smbtar?
     doable - overload type 'tar'. smbtar triggers with a fs spec of something like
               smb:user:pass@host/share:dir
     smbtar has "files newer than" option, test
     don't want password echoed
     no exclude from find
 - Non-root use (remote too)
    document sudo workaround from Alex
    maybe works using the path overrides I put in?
    sudoers:
      Defaults:backup !authenticate
      Cmnd_Alias BACKUP = /usr/bin/afio, /usr/bin/find
      backup  ALL = NOPASSWD: BACKUP
 - Better way to spec fs. 
 - Redo include/exclude paths, not just expressions?
 - Do we want to count on perl (or flexbackup for that matter) being 
     installed on remote machines?  We could do some built-in replacements
     for the 'find' for instance and make things more standardized. although
     keeping it simply built out of standard commandline utils is a big plus
     as well...
 - Make remote machine path overrides possible, that supercede others?
 - Make -extract -files for afio/cpio/zip recurse dirs
      dump/tar already to this. Actually just check that all act the same.
 - Try restore -D for comparing subdirs w/ restore
 - Interactive restore-like shell for types besides dump
      see notes below
 - some "level" that uses rpm, verifies all packages, and just backs
      up any file not in a package OR changed from a package. and the rpm list.
      once the above works make it work for debian packages
 - Log tape sizes (output of buffer or dd or mt tell can be used?)
 - Extract options to not overwrite existing files
 - Handle multi-volume backups (original idea never panned out)
      Maybe figure out which archivers support & try to add
      won't work with pipelines probably
      needs testing
 - Arbitrary "groups" that act sort of like "all"
 - Store the index db on the tapes?
      But we don't know the size ahead of time unless hard-limited resperved size.
      Updating db at the beginning of the tape will add tape-travel overhead for every backup.
      Sometimes rewind->write loses the rest of the contents past the first file?
 - CD-ROM burning (or just .iso type?) for full backups? any?
 - When using files
      Make lower numbered level nuke higher ones & rm index?
      Erase option to to nuke the archive files & records in dir?
 - Encryption with gnupg?
 - Gnome driver/configurator utility
      a separate program that just manipulates flexbackup

-------------------------------------------------------------

Notes for cloning restore shell for afio/tar/cpio types)
Use perl readline module
(Maybe a seperate program or module that runs off a list fed to it)

1) do a listing
2) parse & put into data structures
3) mt bsf 1
4) then give a shell w/ all commands from regular dump
5) mark things for extraction
6) reopen archive & extract that list

Help from restore to jog my brain...

        ls [arg] - list directory
        cd arg - change directory
        pwd - print current directory
        add [arg] - add `arg' to list of files to be extracted
        delete [arg] - delete `arg' from list of files to be extracted
        extract - extract requested files
        setmodes - set modes of requested directories
        quit - immediately exit program
        what - list dump header information
        verbose - toggle verbose flag (useful with ``ls'')
        help or `?' - print this list
If no `arg' is supplied, the current directory is used


Local Variables:
mode: flyspell
end:
