
<c>
Backup & Configuration
<q>
Help me understand numeric dump levels
<a>
TODO, but  very needed FAQ.
See <A HREF="http://docs.sun.com/db/doc/805-7228/6j6q7uf18?a=view">these sun docs</A> for an example.

For those not used to dump-style numeric levels, the latest versions
of flexbackup have added <TT>-full</TT>, <TT>-differential</TT>, 
<TT>-incremental</TT> that get translated into appropriate dump-style level numbers.

<c>
Backup & Configuration
<q>
Backups seem to work ok, but I can't get extracting/listing to work.
<a>
Usually a matter of tape positioning.  Use 'mt rewind; mt fsf
&lt;n&gt;' to get to the right file number on the tape, or use the
"-num" switch with "-list|extract|compare|restore" to have flexbackup
do it for you.  If you are using flexbackup's indexes, remember that
file number 0 is a header used for the index itself.

<c>
Backup & Configuration
<q>
I can't get the $exclude_expr stuff to work!
<a>
Use regular expressions, not wildcards (aka globs).  See a perl, sed,
or grep reference, or "man 7 regex".  Simplistically, you probably
mean to say ".*" instead of "*", and ".?" instead of "?".  Also,
leave OFF the first part of a path that is the filesystem you
are archiving;  the exclude epxressions only match sub-paths of
the backup directory. Test to see if your expression matches what
you want to exlude by:<PRE>
    cd &lt;topdir&gt;
    find . -regex "&lt;expression&gt;"</PRE>

<c>
Backup & Configuration
<q>
I keep getting only one backup per tape when I do "-fs all"!
<a>
Use the non-rewinding device.

<c>
Backup & Configuration
<q>
How do I get remote backups over ssh to work without prompting for a password?
<a>
If you're not using ssh, you should be. Switch to ssh and don't use rsh. If you
are using ssh and still having a problem with it asking for a password, then
your RSAAuthentication parameters are either incorrect or you have
public/private key problems.

Section 7.2.2 of the ssh FAQ might help:<PRE>
  <A HREF="http://www.onsight.com/faq/ssh/ssh-faq.html">http://www.onsight.com/faq/ssh/ssh-faq.html</A>
</PRE>
In a nutshell the value of your <TT>~/.ssh/identity.pub</TT> needs to be present in your
<TT>~/.ssh/authorized_keys</TT> file for RSA authentication to work. For root accounts
you might also need to put <PRE>
  PermitRootLogin yes
</PRE>
in your sshd_config file, as root is treated with more care than normal user
accounts. Note: you might choose without-password or forced-commands-only
instead of yes for more security. See your ssh(1) and sshd(1) man pages.
<P>
If you do not want to use passphrase-less ssh keys or don't want to permit
root logins, See the section on use with "sudo".

<c>
Backup & Configuration
<q>
How do I archive multiple filesytems to tape at once without rewinding
in between, and without redefining "all" $filesystems
in the configuration file?
<a>
Do this:<PRE>
      flexbackup -fs /dir1 -norewind
      flexbackup -fs /dir2 -norewind
      flexbackup -fs /dir3 -norewind</PRE>

<c>
Recovery
<q>
The disk totally died.  How do I get flexbackups' archives off the
tapes on a machine without the flexbackup script installed?
<a>
Something like this, if using compression with
tar/cpio/dump:
<PRE>dd if=/dev/tapedevice bs=10k | gzip -dc | tar xvf -</PRE>
replace "tar xvf -" with "restore -i -f -" or whatever. Skip the gzip
pipe if you aren't using compression.  afio is a bit more compex, but
read the manpage...

<c>
Recovery
<q>
I don't have the index files! (disk died, different machine, etc.)
<a>
This is OK, you can still extract/restore/etc. The index files are for
human convenience only.  Just skip the first file on the tape, it's a
simple "tag" text file.  The rest of the tape is your normal
archives.

<c>
Implementation
<q>
Why keep the table of contents db on disk rather than on the tape?
<a>
...fill in later...

<c>
Implementation
<q>
This index stuff is a useless mess/I can't get it to work!
<a>
It isn't necessary. Set $indexes = 'false' in the config, and just
use written labels on the tapes...

